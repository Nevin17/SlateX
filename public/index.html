<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SlateX</title>

  <!-- Global + Home styles -->
  <link rel="stylesheet" href="/css/global.css" />
  <link rel="stylesheet" href="/css/home.css" />
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <div class="logo-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M3 17L9 11L13 15L21 7" stroke="white" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 7H21V14" stroke="white" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="logo-text">SlateX</span>
      </div>

      <div class="nav-links">
        <a href="#features">Features</a>
        <a href="#about">About</a>
      </div>

      <div class="nav-actions">
        <a href="/auth" class="btn-primary nav-btn" id="auth-btn">Login / Register</a>
        <button class="btn-secondary nav-btn" id="logout-btn" style="display: none;">Logout</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <h1 class="hero-title">Think. Draw. Create ‚Äì Smarter.</h1>
        <p class="hero-description">
         An AI-powered whiteboard that understands your ideas and helps you build faster, clearer, and better.
        </p>

        <div class="hero-buttons">
          <a href="/auth" class="btn-primary" id="hero-cta">
            Open Whiteboard
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>

          <button class="btn-secondary" onclick="document.getElementById('features').scrollIntoView({behavior: 'smooth'})">
            Learn More
          </button>
        </div>
      </div>

      <!-- HERO DEMO -->
      <div class="hero-visual">
        <div class="whiteboard-demo">
          <div class="toolbar">
            <button class="tool-btn active">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M12 19L19 12L22 15L15 22L12 19Z"
                  stroke="currentColor" stroke-width="2"/>
                <path d="M18 13L16.5 5.5L2 2L5.5 16.5L13 18L18 13Z"
                  stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>

            <button class="tool-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="3" width="18" height="18"
                  stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>

            <button class="tool-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M4 7V17H20V7H4Z"
                  stroke="currentColor" stroke-width="2"/>
                <path d="M9 3V7"
                  stroke="currentColor" stroke-width="2"/>
                <path d="M15 3V7"
                  stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>

          <canvas id="demoCanvas"></canvas>
          <div class="placeholder-text">Your ideas here</div>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section class="features" id="features">
    <div class="features-container">
      <div class="features-header">
        <h2 class="features-title">Everything You Need</h2>
        <p class="features-subtitle">
          Simple yet powerful tools to bring your ideas to life
        </p>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <h3 class="feature-title">üé® Freehand Drawing</h3>
          <p class="feature-description">
            Draw freely with smooth pen strokes and multiple brush types.
          </p>
        </div>

        <div class="feature-card">
          <h3 class="feature-title">üìê Shapes & Lines</h3>
          <p class="feature-description">
            Create structured diagrams with 20+ professional shapes.
          </p>
        </div>

        <div class="feature-card">
          <h3 class="feature-title">üìù Text & Notes</h3>
          <p class="feature-description">
            Add text anywhere and create sticky notes for ideas.
          </p>
        </div>

        <div class="feature-card">
          <h3 class="feature-title">üë• Real-time Collaboration</h3>
          <p class="feature-description">
            Work together with your team simultaneously in real-time.
          </p>
        </div>

        <div class="feature-card">
          <h3 class="feature-title">üíº Domain Templates</h3>
          <p class="feature-description">
            Pre-built layouts for coding, medical, finance, and project planning.
          </p>
        </div>

        <div class="feature-card">
          <h3 class="feature-title">üíæ Export & Save</h3>
          <p class="feature-description">
            Save your work and export boards as high-quality images.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-content">
        <span class="logo-text">SlateX</span>
        <p style="color: rgba(255,255,255,0.7); margin-top: 8px; font-size: 14px;">
          Collaborative whiteboard with AI-powered features
        </p>
      </div>
      <div class="footer-links">
        <a href="/auth" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: color 0.2s;">
          Get Started ‚Üí
        </a>
      </div>
    </div>
  </footer>

  <!-- Homepage JS -->
  <script src="/js/home.js"></script>

  <script>
    // Check if user is logged in and update UI
    async function checkAuthStatus() {
      try {
        const response = await fetch('/api/auth/status');
        const data = await response.json();
        
        if (data.authenticated) {
          // User is logged in - show logout button and change CTA
          document.getElementById('auth-btn').style.display = 'none';
          document.getElementById('logout-btn').style.display = 'block';
          document.getElementById('hero-cta').href = '/domain';
          document.getElementById('hero-cta').innerHTML = `
            Go to Whiteboard
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `;
        }
      } catch (error) {
        console.log('Not authenticated');
      }
    }

    // Logout handler
    document.getElementById('logout-btn').addEventListener('click', async () => {
      try {
        const response = await fetch('/api/auth/logout', { method: 'POST' });
        const data = await response.json();
        
        if (data.success) {
          window.location.reload();
        }
      } catch (error) {
        console.error('Logout failed:', error);
      }
    });

    // Check auth status on page load
    checkAuthStatus();
  </script>
</body>
</html>